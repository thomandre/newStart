<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script>
	function goLogIn(){
	    window.location.href = "{{ path('_security_check') }}";
	}
	function goLogOut(){
	    window.location.href = "{{ path('_security_logout') }}";
	}

	function onFbInit() {
	    if (typeof(FB) != 'undefined' && FB != null ) {
	        FB.Event.subscribe('auth.logout', function(response) {
	            setTimeout(goLogOut, 500);
	        });

			FB.getLoginStatus(function () {
				if(typeof FB.logout == 'function'){
			    	if (FB.getAuthResponse()) {
    				    FB.logout(function(response) {
			        		return;
			    		});
		    		}
	    		}
				//console.log('klop');
				setTimeout(goLogOut, 500);
	            //window.location.href = "{{ path('_security_logout') }}";
			});
	    } else {
	    	//console.log('plop');
	    }
	}
</script>

{{ facebook_initialize({'xfbml': true, 'fbAsyncInit': 'onFbInit();'}) }}

