<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script>
	function onFbInit() {
	    if (typeof(FB) != 'undefined' && FB != null ) {
	        FB.Event.subscribe('auth.statusChange', function(response) {
	            if (response.session || response.authResponse) {
	                setTimeout(goLogIn, 500);
	            } else {
	                window.location.href = "{{ path('_security_logout') }}";
	            }
	        });
	        FB.Event.subscribe('auth.logout', function(response) {
	            window.location.href = "{{ path('_security_logout') }}";
	        });

			FB.getLoginStatus(function () {
				if(typeof FB.logout == 'function'){
			        if (FB.getAuthResponse()) {
    				    FB.logout(function(response) {
			        		return;
			    		});
		    		}
	    		}
	            window.location.href = "{{ path('_security_logout') }}";
			});
	    }
	}
</script>

{{ facebook_initialize({'xfbml': true, 'fbAsyncInit': 'onFbInit();'}) }}

